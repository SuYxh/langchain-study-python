# 更通俗易懂的 FewShotPromptTemplate 案例
## 场景设定：智能菜谱推荐助手
假设我们要创建一个AI助手，根据用户提供的食材推荐合适的菜名。
```python
from langchain_core.prompts import PromptTemplate
from langchain_core.prompts.few_shot import FewShotPromptTemplate
from langchain_openai import ChatOpenAI
import os
from dotenv import load_dotenv
load_dotenv()
# 初始化模型
chat_model = ChatOpenAI(model="gpt-3.5-turbo")
# 1. 创建示例集合 - 就像给AI看"标准答案"
examples = [
    {
        "食材": "土豆, 鸡蛋", 
        "推荐菜": "土豆炒鸡蛋"
    },
    {
        "食材": "西红柿, 鸡蛋", 
        "推荐菜": "西红柿炒鸡蛋"
    },
    {
        "食材": "白菜, 豆腐", 
        "推荐菜": "白菜炖豆腐"
    }
]
# 2. 创建示例格式模板 - 定义"标准答案"的展示格式
example_prompt = PromptTemplate.from_template(
    template="食材: {食材}\n推荐菜: {推荐菜}"
)
# 3. 创建FewShotPromptTemplate
prompt = FewShotPromptTemplate(
    examples=examples,                    # 教学示例
    example_prompt=example_prompt,        # 示例格式
    prefix="我是一个智能菜谱推荐助手。根据你提供的食材，我会推荐合适的菜名。\n以下是一些示例：",  # 开头说明
    suffix="食材: {食材}\n推荐菜:",       # 最后的问题格式
    input_variables=["食材"]              # 需要用户提供的变量
)
# 4. 使用示例
print("=== 生成的完整提示词 ===")
final_prompt = prompt.invoke({"食材": "黄瓜, 鸡蛋"})
print(final_prompt.to_string())
print("\n=== AI的推荐 ===")
response = chat_model.invoke(final_prompt)
print(response.content)
```
## 输出结果解释
### 生成的完整提示词：
```
我是一个智能菜谱推荐助手。根据你提供的食材，我会推荐合适的菜名。
以下是一些示例：
食材: 土豆, 鸡蛋
推荐菜: 土豆炒鸡蛋
食材: 西红柿, 鸡蛋
推荐菜: 西红柿炒鸡蛋
食材: 白菜, 豆腐
推荐菜: 白菜炖豆腐
食材: 黄瓜, 鸡蛋
推荐菜:
```
### AI的推荐：
```
黄瓜炒鸡蛋
```
## 用生活化的比喻解释
### 1. `examples`（示例集合）
**就像给学生看的"标准答案"**
```
题目：土豆+鸡蛋 → 答案：土豆炒鸡蛋
题目：西红柿+鸡蛋 → 答案：西红柿炒鸡蛋
题目：白菜+豆腐 → 答案：白菜炖豆腐
```
### 2. `example_prompt`（示例格式）
**就像标准答案的"答题格式"**
```
食材: [学生写的食材]
推荐菜: [学生应该写的菜名]
```
### 3. `prefix`（前缀）
**就像老师的"开场白"**
```
"同学们，今天我们学习根据食材推荐菜名。先看几个例子："
```
### 4. `suffix`（后缀）
**就像"现在轮到你了"的提示**
```
"食材: 黄瓜, 鸡蛋
推荐菜: [请在这里写答案]"
```
## 另一个简单例子：情感分析
```python
# 情感分析例子
examples = [
    {"句子": "今天天气真好！", "情感": "积极"},
    {"句子": "这个电影太无聊了", "情感": "消极"},
    {"句子": "考试没考好，很难过", "情感": "消极"}
]
example_prompt = PromptTemplate.from_template(
    "句子: {句子}\n情感: {情感}"
)
prompt = FewShotPromptTemplate(
    examples=examples,
    example_prompt=example_prompt,
    prefix="请判断以下句子的情感倾向（积极/消极）：",
    suffix="句子: {句子}\n情感:",
    input_variables=["句子"]
)
# 使用
final_prompt = prompt.invoke({"句子": "我中了大奖！"})
print(final_prompt.to_string())
```
## 关键要点总结
1. **示例是老师**：通过几个标准答案教会AI怎么做
2. **格式是模板**：统一的答题格式让AI更容易理解
3. **前缀是说明**：告诉AI这是什么任务
4. **后缀是问题**：现在轮到AI来回答了
这种"先教后考"的方式，让AI能够更好地理解任务要求，给出更准确的答案！